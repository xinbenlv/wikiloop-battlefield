<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>&quot;shared/dist/mwapi&quot; | mailer</title>
	<meta name="description" content="Documentation for mailer">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="../assets/css/main.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="../assets/js/search.json" data-base="..">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="../index.html" class="title">mailer</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
							<input type="checkbox" id="tsd-filter-only-exported" />
							<label class="tsd-widget" for="tsd-filter-only-exported">Only exported</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="../globals.html">Globals</a>
				</li>
				<li>
					<a href="_shared_dist_mwapi_.html">&quot;shared/dist/mwapi&quot;</a>
				</li>
			</ul>
			<h1>Module &quot;shared/dist/mwapi&quot;</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<section class="tsd-panel-group tsd-index-group">
				<h2>Index</h2>
				<section class="tsd-panel tsd-index-panel">
					<div class="tsd-index-content">
						<section class="tsd-index-section ">
							<h3>Variables</h3>
							<ul class="tsd-index-list">
								<li class="tsd-kind-variable tsd-parent-kind-module"><a href="_shared_dist_mwapi_.html#bottleneck" class="tsd-kind-icon">Bottleneck</a></li>
								<li class="tsd-kind-variable tsd-parent-kind-module"><a href="_shared_dist_mwapi_.html#max_mwapi_limit" class="tsd-kind-icon">MAX_<wbr>MWAPI_<wbr>LIMIT</a></li>
								<li class="tsd-kind-variable tsd-parent-kind-module"><a href="_shared_dist_mwapi_.html#mwactionapiclient" class="tsd-kind-icon">Mw<wbr>Action<wbr>Api<wbr>Client</a></li>
								<li class="tsd-kind-variable tsd-parent-kind-module"><a href="_shared_dist_mwapi_.html#_" class="tsd-kind-icon">_</a></li>
								<li class="tsd-kind-variable tsd-parent-kind-module"><a href="_shared_dist_mwapi_.html#__assign" class="tsd-kind-icon">__assign</a></li>
								<li class="tsd-kind-variable tsd-parent-kind-module"><a href="_shared_dist_mwapi_.html#__awaiter" class="tsd-kind-icon">__awaiter</a></li>
								<li class="tsd-kind-variable tsd-parent-kind-module"><a href="_shared_dist_mwapi_.html#__generator" class="tsd-kind-icon">__generator</a></li>
								<li class="tsd-kind-variable tsd-parent-kind-module"><a href="_shared_dist_mwapi_.html#axios" class="tsd-kind-icon">axios</a></li>
								<li class="tsd-kind-variable tsd-parent-kind-module"><a href="_shared_dist_mwapi_.html#common_1" class="tsd-kind-icon">common_<wbr>1</a></li>
								<li class="tsd-kind-variable tsd-parent-kind-module"><a href="_shared_dist_mwapi_.html#immutability_helper_1" class="tsd-kind-icon">immutability_<wbr>helper_<wbr>1</a></li>
								<li class="tsd-kind-variable tsd-parent-kind-module"><a href="_shared_dist_mwapi_.html#useragent" class="tsd-kind-icon">user<wbr>Agent</a></li>
								<li class="tsd-kind-variable tsd-parent-kind-module"><a href="_shared_dist_mwapi_.html#utility_shared_1" class="tsd-kind-icon">utility_<wbr>shared_<wbr>1</a></li>
							</ul>
						</section>
					</div>
				</section>
			</section>
			<section class="tsd-panel-group tsd-member-group ">
				<h2>Variables</h2>
				<section class="tsd-panel tsd-member tsd-kind-variable tsd-parent-kind-module">
					<a name="bottleneck" class="tsd-anchor"></a>
					<h3><span class="tsd-flag ts-flagConst">Const</span> Bottleneck</h3>
					<div class="tsd-signature tsd-kind-icon">Bottleneck<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">&quot;bottleneck&quot;</span><span class="tsd-signature-symbol"> = require(&#x27;bottleneck&#x27;)</span></div>
					<aside class="tsd-sources">
						<ul>
							<li>Defined in shared/dist/mwapi.js:76</li>
						</ul>
					</aside>
				</section>
				<section class="tsd-panel tsd-member tsd-kind-variable tsd-parent-kind-module">
					<a name="max_mwapi_limit" class="tsd-anchor"></a>
					<h3><span class="tsd-flag ts-flagConst">Const</span> MAX_<wbr>MWAPI_<wbr>LIMIT</h3>
					<div class="tsd-signature tsd-kind-icon">MAX_<wbr>MWAPI_<wbr>LIMIT<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">50</span><span class="tsd-signature-symbol"> = 50</span></div>
					<aside class="tsd-sources">
						<ul>
							<li>Defined in shared/dist/mwapi.js:74</li>
						</ul>
					</aside>
				</section>
				<section class="tsd-panel tsd-member tsd-kind-variable tsd-parent-kind-module">
					<a name="mwactionapiclient" class="tsd-anchor"></a>
					<h3><span class="tsd-flag ts-flagConst">Const</span> Mw<wbr>Action<wbr>Api<wbr>Client</h3>
					<div class="tsd-signature tsd-kind-icon">Mw<wbr>Action<wbr>Api<wbr>Client<span class="tsd-signature-symbol">:</span> <a href="_shared_dist_mwapi_.html#mwactionapiclient" class="tsd-signature-type">MwActionApiClient</a><span class="tsd-signature-symbol"> = (function() {function MwActionApiClient() {}MwActionApiClient.getMwPageInfosByTitles &#x3D; function(wiki, titles) {let _areturn __awaiter(this, void 0, Promise, function() {let params; let endpoint; let resultconst _this &#x3D; thisreturn __generator(this, function(_b) {switch (_b.label) {case 0:console.assert(titles &amp;&amp; titles.length &gt; 0 &amp;&amp; titles.length &lt;&#x3D; MAX_MWAPI_LIMIT, &#x27;Parameter titles needs to has a length between 1 to &#x27; + MAX_MWAPI_LIMIT + &#x27;}, but was &#x27; + titles.length + &#x27;.&#x27;)params &#x3D; {action: &#x27;query&#x27;,format: &#x27;json&#x27;,prop: &#x27;pageprops&#x27;,titles: titles.join(&#x27;|&#x27;),}endpoint &#x3D; &#x27;http://&#x27; + utility_shared_1.wikiToDomain[wiki] + &#x27;/w/api.php&#x27;return [4 /* yield */, MwActionApiClient.bottleneck.schedule(function() {return __awaiter(_this, void 0, void 0, function() {return __generator(this, function(_a) {switch (_a.label) {case 0: return [4 /* yield */, axios.get(endpoint, { params, headers: { &#x27;User-Agent&#x27;: userAgent } })]case 1: return [2 /* return */, _a.sent()]}})})})]case 1:result &#x3D; _b.sent()if (Object.keys((_a &#x3D; result.data.query) &#x3D;&#x3D;&#x3D; null || _a &#x3D;&#x3D;&#x3D; void 0 ? void 0 : _a.pages).length) {return [2 /* return */, Object.keys(result.data.query.pages).map(function(pageId) {return result.data.query.pages[pageId]})]}return [2 /* return */, []]}})})}MwActionApiClient.getRevisionIdsByTitle &#x3D; function(wiki, pageTitle, startRevId, limit) {if (startRevId &#x3D;&#x3D;&#x3D; void 0) {startRevId &#x3D; null}if (limit &#x3D;&#x3D;&#x3D; void 0) {limit &#x3D; MAX_MWAPI_LIMIT}return __awaiter(this, void 0, Promise, function() {let query; let searchParams; let url; let revisionsJson; let pageId; let e_1const _this &#x3D; thisreturn __generator(this, function(_a) {switch (_a.label) {case 0:query &#x3D; {action: &#x27;query&#x27;,format: &#x27;json&#x27;,prop: &#x27;revisions&#x27;,titles: pageTitle,rvprop: &#x27;ids&#x27;,rvslots: &#x27;main&#x27;,rvlimit: limit,rvdir: &#x27;older&#x27;,}if (startRevId) {query.rvstart &#x3D; startRevId}searchParams &#x3D; new URLSearchParams(query)url &#x3D; new URL(&#x27;http://&#x27; + utility_shared_1.wikiToDomain[wiki] + &#x27;/w/api.php?&#x27; + searchParams.toString())console.log(&#x27;Url &#x3D; &#x27;, url)_a.label &#x3D; 1case 1:_a.trys.push([1, 3, , 4])return [4 /* yield */, MwActionApiClient.bottleneck.schedule(function() {return __awaiter(_this, void 0, void 0, function() {return __generator(this, function(_a) {switch (_a.label) {case 0: return [4 /* yield */, axios.get(url.toString(), {headers: { &#x27;User-Agent&#x27;: userAgent },})]case 1: return [2 /* return */, _a.sent()]}})})})]case 2:revisionsJson &#x3D; (_a.sent()).datapageId &#x3D; Object.keys(revisionsJson.query.pages)[0]if (revisionsJson.query.pages[pageId].revisions) {return [2 /* return */, revisionsJson.query.pages[pageId].revisions.map(function(item) {return item.revid})]} else {return [2 /* return */, []]}return [3 /* break */, 4]case 3:e_1 &#x3D; _a.sent()common_1.logger.warn(e_1)return [2 /* return */, []]case 4: return [2]}})})}MwActionApiClient.bottleneck &#x3D; new Bottleneck({minTime: 500,})/*** Get the last-est revisions. This is the only endpoint where MediaWiki* allows querying querying various pages.** @params ctx see {@link getRawRecentChanges}* @return raw object of recentChanges.*/MwActionApiClient.getLatestRevisionIds &#x3D; function(ctx) {return __awaiter(this, void 0, void 0, function() {let ctx2; let raw; let revIdsreturn __generator(this, function(_a) {switch (_a.label) {case 0:ctx2 &#x3D; immutability_helper_1.default(ctx, {limit: { $set: MAX_MWAPI_LIMIT },})return [4 /* yield */, MwActionApiClient.getRawRecentChanges(ctx2)]case 1:raw &#x3D; _a.sent()revIds &#x3D; raw.query.recentchanges.map(function(rc) {return rc.revid})return [2 /* return */, _.sample(revIds, ctx.limit)]}})})}/*** Get the last-est revisions. This is the only endpoint where MediaWiki* allows querying querying various pages.** @params ctx see {@link getRawRecentChanges}* @return raw object of recentChanges.*/MwActionApiClient.getLatestOresRevisionIds &#x3D; function(ctx) {return __awaiter(this, void 0, void 0, function() {let cloneCtx; let raw; let resultreturn __generator(this, function(_a) {switch (_a.label) {case 0:cloneCtx &#x3D; __assign({}, ctx)cloneCtx.limit &#x3D; MAX_MWAPI_LIMITreturn [4 /* yield */, MwActionApiClient.getRawRecentChanges(cloneCtx)]case 1:raw &#x3D; _a.sent()result &#x3D; raw.query.recentchanges.filter(function(rc) {return rc.oresscores.damaging &amp;&amp; rc.oresscores.goodfaith &amp;&amp;rc.oresscores.damaging.true &gt;&#x3D; 0.5 &amp;&amp; rc.oresscores.goodfaith.false &gt;&#x3D; 0.5}).map(function(rc) {return rc.revid})// TODO(xinbenlv): when we add test, allow deterministic behavior with seed.return [2 /* return */, _.sample(result, ctx.limit)]}})})}/*** Get the last-est revisions. This is the only endpoint where MediaWiki* allows querying querying various pages.* @param* @returns raw object of recentChanges.*/MwActionApiClient.getRawRecentChanges &#x3D; function(_a) {const _b &#x3D; _a.wiki; const wiki &#x3D; _b &#x3D;&#x3D;&#x3D; void 0 ? &#x27;enwiki&#x27; : _b; const direction &#x3D; _a.direction; const timestamp &#x3D; _a.timestamp; const _c &#x3D; _a.limit; const limit &#x3D; _c &#x3D;&#x3D;&#x3D; void 0 ? 500 : _c; const _d &#x3D; _a.bad; const bad &#x3D; _d &#x3D;&#x3D;&#x3D; void 0 ? false : _d; const _e &#x3D; _a.isLast; const isLast &#x3D; _e &#x3D;&#x3D;&#x3D; void 0 ? false : _ereturn __awaiter(this, void 0, void 0, function() {let searchParams; let url; let response; let recentChangesJsonconst _this &#x3D; thisreturn __generator(this, function(_f) {switch (_f.label) {case 0:searchParams &#x3D; new URLSearchParams({action: &#x27;query&#x27;,format: &#x27;json&#x27;,list: &#x27;recentchanges&#x27;,formatversion: &#x27;2&#x27;,rcnamespace: &#x27;0&#x27;,rcprop: &#x27;title|timestamp|ids|oresscores|flags|tags|sizes|comment|user&#x27;,rcshow: &#x27;!bot&#x27;,rclimit: &#x27;1&#x27;,rctype: &#x27;edit&#x27;,rctoponly: &#x27;1&#x27;,})if (bad) {searchParams.set(&#x27;rcshow&#x27;, &#x27;!bot|oresreview&#x27;)}if (isLast) {searchParams.set(&#x27;rctoponly&#x27;, &#x27;1&#x27;)}if (direction) {searchParams.set(&#x27;rcdir&#x27;, direction || &#x27;older&#x27;)}if (timestamp) {searchParams.set(&#x27;rcstart&#x27;, timestamp || (new Date().getTime() / 1000))}searchParams.set(&#x27;rclimit&#x27;, limit.toString())url &#x3D; new URL(&#x27;http://&#x27; + utility_shared_1.wikiToDomain[wiki] + &#x27;/w/api.php?&#x27; + searchParams.toString())common_1.logger.info(&#x27;Requesting for Media Action API: &#x27; + url.toString())common_1.logger.info(&#x27;Try sandbox request here: &#x27; + new URL(&#x27;http://&#x27; + utility_shared_1.wikiToDomain[wiki] + &#x27;/wiki/Special:ApiSandbox#&#x27; + searchParams.toString()))return [4 /* yield */, MwActionApiClient.bottleneck.schedule(function() {return __awaiter(_this, void 0, void 0, function() {return __generator(this, function(_a) {switch (_a.label) {case 0: return [4 /* yield */, axios.get(url.toString(), {headers: { &#x27;User-Agent&#x27;: userAgent },})]case 1: return [2 /* return */, _a.sent()]}})})})]case 1:response &#x3D; _f.sent()recentChangesJson &#x3D; response.data/** Sample response{&quot;batchcomplete&quot;:&quot;&quot;,&quot;continue&quot;:{&quot;rccontinue&quot;:&quot;20190701214931|1167038199&quot;,&quot;continue&quot;:&quot;-||info&quot;},&quot;query&quot;:{&quot;recentchanges&quot;:[{&quot;type&quot;:&quot;edit&quot;,&quot;ns&quot;:0,&quot;title&quot;:&quot;Multiprocessor system architecture&quot;,&quot;pageid&quot;:58955273,&quot;revid&quot;:904396518,&quot;old_revid&quot;:904395753,&quot;rcid&quot;:1167038198,&quot;user&quot;:&quot;Dhtwiki&quot;,&quot;userid&quot;:9475572,&quot;timestamp&quot;:&quot;2019-07-01T21:49:32Z&quot;,&quot;comment&quot;:&quot;Putting images at bottom, side by side, to prevent impinging on References section&quot;}// ...]}} */return [2 /* return */, recentChangesJson]}})})}MwActionApiClient.getLastRevisionsByTitles &#x3D; function(titles, wiki, rvcontinue) {if (wiki &#x3D;&#x3D;&#x3D; void 0) {wiki &#x3D; &#x27;enwiki&#x27;}if (rvcontinue &#x3D;&#x3D;&#x3D; void 0) {rvcontinue &#x3D; null}return __awaiter(this, void 0, void 0, function() {let query; let searchParams; let urlconst _this &#x3D; thisreturn __generator(this, function(_a) {switch (_a.label) {case 0:query &#x3D; {action: &#x27;query&#x27;,format: &#x27;json&#x27;,prop: &#x27;revisions&#x27;,titles: titles.join(&#x27;|&#x27;),rvprop: &#x27;ids|timestamp|flags|comment|user|oresscores|tags|userid|roles|flagged&#x27;,}if (rvcontinue) {query.rvcontinue &#x3D; rvcontinue}searchParams &#x3D; new URLSearchParams(query)url &#x3D; new URL(&#x27;http://&#x27; + utility_shared_1.wikiToDomain[wiki] + &#x27;/w/api.php?&#x27; + searchParams.toString())return [4 /* yield */, MwActionApiClient.bottleneck.schedule(function() {return __awaiter(_this, void 0, void 0, function() {return __generator(this, function(_a) {switch (_a.label) {case 0: return [4 /* yield */, axios.get(url.toString(), {headers: { &#x27;User-Agent&#x27;: userAgent },})]case 1: return [2 /* return */, _a.sent()]}})})})]case 1: return [2 /* return */, (_a.sent()).data]}})})}MwActionApiClient.getDiffByWikiRevId &#x3D; function(wiki, revId) {return __awaiter(this, void 0, void 0, function() {let query; let searchParams; let url; let resultconst _this &#x3D; thisreturn __generator(this, function(_a) {switch (_a.label) {case 0:query &#x3D; {action: &#x27;compare&#x27;,format: &#x27;json&#x27;,fromrev: &#x27;&#x27; + revId,torelative: &#x27;prev&#x27;,}searchParams &#x3D; new URLSearchParams(query)url &#x3D; new URL(&#x27;http://&#x27; + utility_shared_1.wikiToDomain[wiki] + &#x27;/w/api.php?&#x27; + searchParams.toString())return [4 /* yield */, MwActionApiClient.bottleneck.schedule(function() {return __awaiter(_this, void 0, void 0, function() {return __generator(this, function(_a) {switch (_a.label) {case 0: return [4 /* yield */, axios.get(url.toString(), {headers: { &#x27;User-Agent&#x27;: userAgent },})]case 1: return [2 /* return */, _a.sent()]}})})})]case 1:result &#x3D; (_a.sent()).datareturn [2 /* return */, result]}})})}/*** Given a wiki, using a title to get all it&#x27;s category children* please note this function handles the &quot;continue&quot; call to MediaWiki Action API* it is in charge of making all follow up queries.** @param wiki* @param entryArticle*/MwActionApiClient.getCategoryChildren &#x3D; function(wiki, entryArticle) {let _a; let _b; let _c; let _d; let _e; let _f; let _greturn __awaiter(this, void 0, Promise, function() {let endpoint; let result; let params; let retreturn __generator(this, function(_h) {switch (_h.label) {case 0:endpoint &#x3D; &#x27;http://&#x27; + utility_shared_1.wikiToDomain[wiki] + &#x27;/w/api.php&#x27;result &#x3D; []params &#x3D; {action: &#x27;query&#x27;,format: &#x27;json&#x27;,list: &#x27;categorymembers&#x27;,formatversion: &#x27;2&#x27;,cmtitle: entryArticle,cmprop: &#x27;ids|timestamp|title&#x27;,cmlimit: &#x27;500&#x27;,}ret &#x3D; null_h.label &#x3D; 1case 1: return [4 /* yield */, axios.get(endpoint, { params, headers: { &#x27;User-Agent&#x27;: userAgent } })]case 2:ret &#x3D; _h.sent()/** json{&quot;batchcomplete&quot;: true,&quot;continue&quot;: {&quot;cmcontinue&quot;: &quot;page|0f53aa04354b3131430443294f394543293f042d45435331434f394543011f01c4dcc1dcbedc0d|61561742&quot;,&quot;continue&quot;: &quot;-||&quot;},&quot;query&quot;: {&quot;categorymembers&quot;: [{&quot;pageid&quot;: 48410011,&quot;ns&quot;: 0,&quot;title&quot;: &quot;2020 United States presidential election&quot;,&quot;timestamp&quot;: &quot;2020-03-28T19:51:23Z&quot;}],}}*/if (((_c &#x3D; (_b &#x3D; (_a &#x3D; ret.data) &#x3D;&#x3D;&#x3D; null || _a &#x3D;&#x3D;&#x3D; void 0 ? void 0 : _a.query) &#x3D;&#x3D;&#x3D; null || _b &#x3D;&#x3D;&#x3D; void 0 ? void 0 : _b.categorymembers) &#x3D;&#x3D;&#x3D; null || _c &#x3D;&#x3D;&#x3D; void 0 ? void 0 : _c.length) &gt; 0) {ret.data.query.categorymembers.forEach(function(item) {return console.log(&#x27;&#x27; + JSON.stringify(item.title, null, 2))})result.push.apply(result, ret.data.query.categorymembers)if ((_e &#x3D; (_d &#x3D; ret.data) &#x3D;&#x3D;&#x3D; null || _d &#x3D;&#x3D;&#x3D; void 0 ? void 0 : _d.continue) &#x3D;&#x3D;&#x3D; null || _e &#x3D;&#x3D;&#x3D; void 0 ? void 0 : _e.cmcontinue) {params.cmcontinue &#x3D; ret.data.continue.cmcontinue}} else {return [2 /* return */, result]}_h.label &#x3D; 3case 3:if ((_g &#x3D; (_f &#x3D; ret.data) &#x3D;&#x3D;&#x3D; null || _f &#x3D;&#x3D;&#x3D; void 0 ? void 0 : _f.continue) &#x3D;&#x3D;&#x3D; null || _g &#x3D;&#x3D;&#x3D; void 0 ? void 0 : _g.cmcontinue) {return [3 /* break */, 1]}_h.label &#x3D; 4case 4: return [2 /* return */, result]}})})}/*** Given a wiki, using a title to get all it&#x27;s category children* please note this function handles the &quot;continue&quot; call to MediaWiki Action API* it is in charge of making all follow up queries.** @param wiki* @param entryArticle*/MwActionApiClient.getLinkChildren &#x3D; function(wiki, entryArticle) {let _a; let _b; let _c; let _d; let _e; let _f; let _g; let _h; let _j; let _kreturn __awaiter(this, void 0, Promise, function() {let endpoint; let result; let params; let ret; let pageId; let links; let e_2return __generator(this, function(_l) {switch (_l.label) {case 0:_l.trys.push([0, 5, , 6])endpoint &#x3D; &#x27;http://&#x27; + utility_shared_1.wikiToDomain[wiki] + &#x27;/w/api.php&#x27;result &#x3D; []params &#x3D; {action: &#x27;query&#x27;,format: &#x27;json&#x27;,prop: &#x27;links&#x27;,formatversion: &#x27;2&#x27;,plnamespace: &#x27;0&#x27;,titles: entryArticle,pllimit: &#x27;500&#x27;,}ret &#x3D; null_l.label &#x3D; 1case 1: return [4 /* yield */, axios.get(endpoint, { params, headers: { &#x27;User-Agent&#x27;: userAgent } })]case 2:ret &#x3D; _l.sent()/** json{&quot;continue&quot;: {&quot;plcontinue&quot;: &quot;9228|0|2010_TK7&quot;,&quot;continue&quot;: &quot;||&quot;},&quot;query&quot;: {&quot;pages&quot;: {&quot;9228&quot;: {&quot;pageid&quot;: 9228,&quot;ns&quot;: 0,&quot;title&quot;: &quot;Earth&quot;,&quot;links&quot;: [{&quot;ns&quot;: 0,&quot;title&quot;: &quot;2002 AA29&quot;},{&quot;ns&quot;: 0,&quot;title&quot;: &quot;2006 RH120&quot;}]}}}}*/if (((_b &#x3D; (_a &#x3D; ret.data) &#x3D;&#x3D;&#x3D; null || _a &#x3D;&#x3D;&#x3D; void 0 ? void 0 : _a.query) &#x3D;&#x3D;&#x3D; null || _b &#x3D;&#x3D;&#x3D; void 0 ? void 0 : _b.pages) &amp;&amp; Object.keys((_d &#x3D; (_c &#x3D; ret.data) &#x3D;&#x3D;&#x3D; null || _c &#x3D;&#x3D;&#x3D; void 0 ? void 0 : _c.query) &#x3D;&#x3D;&#x3D; null || _d &#x3D;&#x3D;&#x3D; void 0 ? void 0 : _d.pages).length &#x3D;&#x3D; 1) {pageId &#x3D; Object.keys((_f &#x3D; (_e &#x3D; ret.data) &#x3D;&#x3D;&#x3D; null || _e &#x3D;&#x3D;&#x3D; void 0 ? void 0 : _e.query) &#x3D;&#x3D;&#x3D; null || _f &#x3D;&#x3D;&#x3D; void 0 ? void 0 : _f.pages)[0]links &#x3D; ret.data.query.pages[pageId].links// console.log(&#x60;XXX&#x60;, links, &#x27;pageId &#x3D;&#x27;, pageId);// console.log(&#x60;XXX ret.data&#x60;, JSON.stringify(ret.data, null, 2));result.push.apply(result, links.map(function(link) {return link.title}))if ((_h &#x3D; (_g &#x3D; ret.data) &#x3D;&#x3D;&#x3D; null || _g &#x3D;&#x3D;&#x3D; void 0 ? void 0 : _g.continue) &#x3D;&#x3D;&#x3D; null || _h &#x3D;&#x3D;&#x3D; void 0 ? void 0 : _h.plcontinue) {params.plcontinue &#x3D; ret.data.continue.plcontinue} else {return [3 /* break */, 4]}} else {return [3 /* break */, 4]}_l.label &#x3D; 3case 3:if ((_k &#x3D; (_j &#x3D; ret.data) &#x3D;&#x3D;&#x3D; null || _j &#x3D;&#x3D;&#x3D; void 0 ? void 0 : _j.continue) &#x3D;&#x3D;&#x3D; null || _k &#x3D;&#x3D;&#x3D; void 0 ? void 0 : _k.plcontinue) {return [3 /* break */, 1]}_l.label &#x3D; 4case 4: return [2 /* return */, result]case 5:e_2 &#x3D; _l.sent()console.warn(e_2)return [2 /* return */, []]case 6: return [2]}})})}return MwActionApiClient}())</span></div>
					<aside class="tsd-sources">
						<ul>
							<li>Defined in shared/dist/mwapi.js:82</li>
						</ul>
					</aside>
					<div class="tsd-comment tsd-typography">
						<div class="lead">
							<p>MediaWiki Action API Client Utility</p>
						</div>
						<dl class="tsd-comment-tags">
							<dt>doc</dt>
							<dd><p><a href="https://www.mediawiki.org/wiki/API:Main_page">https://www.mediawiki.org/wiki/API:Main_page</a></p>
							</dd>
						</dl>
					</div>
				</section>
				<section class="tsd-panel tsd-member tsd-kind-variable tsd-parent-kind-module">
					<a name="_" class="tsd-anchor"></a>
					<h3><span class="tsd-flag ts-flagConst">Const</span> _</h3>
					<div class="tsd-signature tsd-kind-icon">_<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">UnderscoreStatic</span><span class="tsd-signature-symbol"> = require(&#x27;underscore&#x27;)</span></div>
					<aside class="tsd-sources">
						<ul>
							<li>Defined in shared/dist/mwapi.js:71</li>
						</ul>
					</aside>
				</section>
				<section class="tsd-panel tsd-member tsd-kind-variable tsd-parent-kind-module">
					<a name="__assign" class="tsd-anchor"></a>
					<h3>__assign</h3>
					<div class="tsd-signature tsd-kind-icon">__assign<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">any</span><span class="tsd-signature-symbol"> = (this &amp;&amp; this.__assign) || function() {__assign &#x3D; Object.assign || function(t) {for (var s, i &#x3D; 1, n &#x3D; arguments.length; i &lt; n; i++) {s &#x3D; arguments[i]for (const p in s) {if (Object.prototype.hasOwnProperty.call(s, p)) {t[p] &#x3D; s[p]}}}return t}return __assign.apply(this, arguments)}</span></div>
					<aside class="tsd-sources">
						<ul>
							<li>Defined in shared/dist/mwapi.js:15</li>
						</ul>
					</aside>
				</section>
				<section class="tsd-panel tsd-member tsd-kind-variable tsd-parent-kind-module">
					<a name="__awaiter" class="tsd-anchor"></a>
					<h3><span class="tsd-flag ts-flagConst">Const</span> __awaiter</h3>
					<div class="tsd-signature tsd-kind-icon">__awaiter<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">any</span><span class="tsd-signature-symbol"> = (this &amp;&amp; this.__awaiter) || function(thisArg, _arguments, P, generator) {function adopt(value) {return value instanceof P ? value : new P(function(resolve) {resolve(value)})}return new (P || (P &#x3D; Promise))(function(resolve, reject) {function fulfilled(value) {try {step(generator.next(value))} catch (e) {reject(e)}}function rejected(value) {try {step(generator.throw(value))} catch (e) {reject(e)}}function step(result) {result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected)}step((generator &#x3D; generator.apply(thisArg, _arguments || [])).next())})}</span></div>
					<aside class="tsd-sources">
						<ul>
							<li>Defined in shared/dist/mwapi.js:27</li>
						</ul>
					</aside>
				</section>
				<section class="tsd-panel tsd-member tsd-kind-variable tsd-parent-kind-module">
					<a name="__generator" class="tsd-anchor"></a>
					<h3><span class="tsd-flag ts-flagConst">Const</span> __generator</h3>
					<div class="tsd-signature tsd-kind-icon">__generator<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">any</span><span class="tsd-signature-symbol"> = (this &amp;&amp; this.__generator) || function(thisArg, body) {let _ &#x3D; { label: 0, sent() {if (t[0] &amp; 1) {throw t[1]} return t[1]}, trys: [], ops: [] }; let f; let y; let t; let greturn g &#x3D; { next: verb(0), throw: verb(1), return: verb(2) }, typeof Symbol &#x3D;&#x3D;&#x3D; &#x27;function&#x27; &amp;&amp; (g[Symbol.iterator] &#x3D; function() {return this}), gfunction verb(n) {return function(v) {return step([n, v])}}function step(op) {if (f) {throw new TypeError(&#x27;Generator is already executing.&#x27;)}while (_) {try {if (f &#x3D; 1, y &amp;&amp; (t &#x3D; op[0] &amp; 2 ? y.return : op[0] ? y.throw || ((t &#x3D; y.return) &amp;&amp; t.call(y), 0) : y.next) &amp;&amp; !(t &#x3D; t.call(y, op[1])).done) {return t}if (y &#x3D; 0, t) {op &#x3D; [op[0] &amp; 2, t.value]}switch (op[0]) {case 0: case 1: t &#x3D; op; breakcase 4: _.label++; return { value: op[1], done: false }case 5: _.label++; y &#x3D; op[1]; op &#x3D; [0]; continuecase 7: op &#x3D; _.ops.pop(); _.trys.pop(); continuedefault:if (!(t &#x3D; _.trys, t &#x3D; t.length &gt; 0 &amp;&amp; t[t.length - 1]) &amp;&amp; (op[0] &#x3D;&#x3D;&#x3D; 6 || op[0] &#x3D;&#x3D;&#x3D; 2)) {_ &#x3D; 0; continue}if (op[0] &#x3D;&#x3D;&#x3D; 3 &amp;&amp; (!t || (op[1] &gt; t[0] &amp;&amp; op[1] &lt; t[3]))) {_.label &#x3D; op[1]; break}if (op[0] &#x3D;&#x3D;&#x3D; 6 &amp;&amp; _.label &lt; t[1]) {_.label &#x3D; t[1]; t &#x3D; op; break}if (t &amp;&amp; _.label &lt; t[2]) {_.label &#x3D; t[2]; _.ops.push(op); break}if (t[2]) {_.ops.pop()}_.trys.pop(); continue}op &#x3D; body.call(thisArg, _)} catch (e) {op &#x3D; [6, e]; y &#x3D; 0} finally {f &#x3D; t &#x3D; 0}}if (op[0] &amp; 5) {throw op[1]} return { value: op[0] ? op[1] : void 0, done: true }}}</span></div>
					<aside class="tsd-sources">
						<ul>
							<li>Defined in shared/dist/mwapi.js:36</li>
						</ul>
					</aside>
				</section>
				<section class="tsd-panel tsd-member tsd-kind-variable tsd-parent-kind-module">
					<a name="axios" class="tsd-anchor"></a>
					<h3><span class="tsd-flag ts-flagConst">Const</span> axios</h3>
					<div class="tsd-signature tsd-kind-icon">axios<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">&quot;/Users/zzn/ws/wikiloop-doublecheck/node_modules/axios/index&quot;</span><span class="tsd-signature-symbol"> = require(&#x27;axios&#x27;)</span></div>
					<aside class="tsd-sources">
						<ul>
							<li>Defined in shared/dist/mwapi.js:72</li>
						</ul>
					</aside>
				</section>
				<section class="tsd-panel tsd-member tsd-kind-variable tsd-parent-kind-module">
					<a name="common_1" class="tsd-anchor"></a>
					<h3><span class="tsd-flag ts-flagConst">Const</span> common_<wbr>1</h3>
					<div class="tsd-signature tsd-kind-icon">common_<wbr>1<span class="tsd-signature-symbol">:</span> <a href="_server_common_.html" class="tsd-signature-type">&quot;server/common&quot;</a><span class="tsd-signature-symbol"> = require(&#x27;@/server/common&#x27;)</span></div>
					<aside class="tsd-sources">
						<ul>
							<li>Defined in shared/dist/mwapi.js:70</li>
						</ul>
					</aside>
				</section>
				<section class="tsd-panel tsd-member tsd-kind-variable tsd-parent-kind-module">
					<a name="immutability_helper_1" class="tsd-anchor"></a>
					<h3><span class="tsd-flag ts-flagConst">Const</span> immutability_<wbr>helper_<wbr>1</h3>
					<div class="tsd-signature tsd-kind-icon">immutability_<wbr>helper_<wbr>1<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">&quot;/Users/zzn/ws/wikiloop-doublecheck/node_modules/immutability-helper/index&quot;</span><span class="tsd-signature-symbol"> = require(&#x27;immutability-helper&#x27;)</span></div>
					<aside class="tsd-sources">
						<ul>
							<li>Defined in shared/dist/mwapi.js:73</li>
						</ul>
					</aside>
				</section>
				<section class="tsd-panel tsd-member tsd-kind-variable tsd-parent-kind-module">
					<a name="useragent" class="tsd-anchor"></a>
					<h3><span class="tsd-flag ts-flagConst">Const</span> user<wbr>Agent</h3>
					<div class="tsd-signature tsd-kind-icon">user<wbr>Agent<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">string</span><span class="tsd-signature-symbol"> = process.env.USER_AGENT || &#x27;WikiLoop DoubleCheck Dev&#x27;</span></div>
					<aside class="tsd-sources">
						<ul>
							<li>Defined in shared/dist/mwapi.js:75</li>
						</ul>
					</aside>
				</section>
				<section class="tsd-panel tsd-member tsd-kind-variable tsd-parent-kind-module">
					<a name="utility_shared_1" class="tsd-anchor"></a>
					<h3><span class="tsd-flag ts-flagConst">Const</span> utility_<wbr>shared_<wbr>1</h3>
					<div class="tsd-signature tsd-kind-icon">utility_<wbr>shared_<wbr>1<span class="tsd-signature-symbol">:</span> <a href="_shared_utility_shared_.html" class="tsd-signature-type">&quot;shared/utility-shared&quot;</a><span class="tsd-signature-symbol"> = require(&#x27;@/shared/utility-shared&#x27;)</span></div>
					<aside class="tsd-sources">
						<ul>
							<li>Defined in shared/dist/mwapi.js:69</li>
						</ul>
					</aside>
				</section>
			</section>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="../globals.html"><em>Globals</em></a>
					</li>
					<li class="current tsd-kind-module">
						<a href="_shared_dist_mwapi_.html">&quot;shared/dist/mwapi&quot;</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-object-literal"><span class="tsd-kind-icon">Object literal</span></li>
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="../assets/js/main.js"></script>
</body>
</html>